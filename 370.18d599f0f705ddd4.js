"use strict";(self.webpackChunkpvida_backoffice_web=self.webpackChunkpvida_backoffice_web||[]).push([[370],{2370:(O,N,p)=>{p.r(N),p.d(N,{UsersModule:()=>ke});var g=p(6814),Z=p(8425),m=p(5861),a=p(95),x=p(2134);const S=[x.e.AGENTE,x.e.ADMIN,x.e.VISUALIZADOR];var e=p(6689),C=p(9849),y=p(3997),E=p(1426),T=p(4664),I=p(6983),_=p(5619),f=p(2686);let l=(()=>{var s;class o{constructor(){this.usersData=new _.X(null),this.isLoading=new _.X(!0),this.isEmptyList=new _.X(!1),this.termSearch=new _.X(""),this.profileSearch=new _.X(""),this.uriForSearch=new _.X(""),this.paginationState=new _.X(new f.n),this.usersData$=this.usersData.asObservable(),this.isLoading$=this.isLoading.asObservable(),this.isEmptyList$=this.isEmptyList.asObservable(),this.uriForSearch$=this.uriForSearch.asObservable(),this.paginationState$=this.paginationState.asObservable(),this.termSearch$=this.termSearch.asObservable(),this.profileSearch$=this.profileSearch.asObservable()}get usersContent(){return this.usersData.getValue()}set usersContent(t){this.usersData.next(t)}get isLoadingContent(){return this.isLoading.getValue()}set isLoadingContent(t){this.isLoading.next(t)}get isEmptyContent(){return this.isEmptyList.getValue()}set isEmptyContent(t){this.isEmptyList.next(t)}get termSearchContent(){return this.termSearch.getValue()}set termSearchContent(t){this.termSearch.next(t)}get profileSearchContent(){return this.profileSearch.getValue()}set profileSearchContent(t){this.profileSearch.next(t)}get uriForSearchContent(){return this.uriForSearch.getValue()}set uriForSearchContent(t){this.uriForSearch.next(t)}get paginationStateContent(){return this.paginationState.getValue()}set paginationStateContent(t){this.paginationState.next(t)}getById(t){return this.usersContent.find(n=>n.id===t)}updateUser(t){const n=this.usersContent.indexOf(this.getById(t.id));this.usersContent[n]={...t}}addUser(t){return this.usersContent=[...this.usersContent,t],t}removeUser(t){this.usersContent=this.usersContent.filter(n=>n.id!==t)}toggleBlock(t,n){const i=this.getById(t);if(i){const d=this.usersContent.indexOf(i);this.usersContent[d].isEnabled=n}}}return(s=o).\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),o})();var u=p(2186);let c=(()=>{var s;class o{constructor(t,n,i){this.apiService=t,this.usersState=n,this.notificationService=i}updateUriForSearch(){this.usersState.isLoadingContent=!0,this.usersState.isEmptyContent=!1;let t=new URLSearchParams({first:this.usersState.paginationStateContent.first.toString(),max:this.usersState.paginationStateContent.pageSize.toString()});""!==this.usersState.termSearchContent&&t.set("email",this.usersState.termSearchContent.trim());let n=[];n.push("recycled:false"),""!==this.usersState.profileSearchContent&&n.push(`profile:${this.usersState.profileSearchContent}`);let i="";n.length>0&&(i="&q="+n.join(" ")),this.usersState.uriForSearchContent="backofficeuser/buscarpor/"+encodeURIComponent("?"+t.toString()+i)}listenToSearchChanges(t){t.pipe((0,y.x)(),(0,E.b)(400),(0,T.w)(n=>(this.usersState.paginationStateContent.pageNumber=0,this.usersState.paginationStateContent.first=0,this.usersState.termSearchContent=n,this.getUsersData()))).subscribe()}listenToProfileSearchChanges(t){t.pipe((0,y.x)(),(0,E.b)(400),(0,T.w)(n=>(this.usersState.paginationStateContent.pageNumber=0,this.usersState.paginationStateContent.first=0,this.usersState.profileSearchContent=n,this.getUsersData()))).subscribe()}validateResult(t){if(t?.responseEnum==C.T.SUCCESS){let n=t?.data.users;this.usersState.usersContent=n,this.usersState.paginationStateContent.totalRecords=t?.data.total,0==n?.length&&(this.usersState.isEmptyContent=!0)}else this.usersState.isEmptyContent=!0;this.usersState.isLoadingContent=!1}getUsersData(){var t=this;return(0,m.Z)(function*(){t.updateUriForSearch();let n=yield t.apiService.get(t.usersState.uriForSearchContent);t.validateResult(n)})()}getUserbyId(t){var n=this;return(0,m.Z)(function*(){let i=yield n.apiService.get(`backofficeuser/${t}`);n.validateResult(i)})()}addUser(t){var n=this;return(0,m.Z)(function*(){n.usersState.isLoadingContent=!0;let i=yield n.apiService.addUpdate(t,"backofficeuser");return i?.responseEnum==C.T.SUCCESS?(n.notificationService.success("Utilizador adicionado com sucesso!"),n.usersState.isEmptyContent=!0,n.getUsersData(),!0):(n.notificationService.error(i?.responseMsg),n.usersState.isLoadingContent=!1,!1)})()}editUser(t){var n=this;return(0,m.Z)(function*(){n.usersState.isLoadingContent=!0;let i=yield n.apiService.update(t,`backofficeuser/${t.id}`);return i?.responseEnum==C.T.SUCCESS?(n.notificationService.success("Utilizador Atualizado com sucesso!"),n.usersState.updateUser(t),n.usersState.isLoadingContent=!1,!0):(n.notificationService.error(i?.responseMsg),n.usersState.isLoadingContent=!1,!1)})()}resetPassword(t){var n=this;return(0,m.Z)(function*(){n.usersState.isLoadingContent=!0;let i=yield n.apiService.update(t,"authoperation/update-password-via-admin");return i?.responseEnum==C.T.SUCCESS||i?.responseEnum==C.T.CREATED?(n.notificationService.success("Palavra-Passe Actualizada com sucesso!"),n.usersState.updateUser(t),n.usersState.isLoadingContent=!1,!0):(n.notificationService.error(i?.responseMsg),n.usersState.isLoadingContent=!1,!1)})()}removeUser(t){var n=this;return(0,m.Z)(function*(){n.usersState.isLoadingContent=!0;const i=n.usersState.getById(t);n.usersState.removeUser(t);let d=yield n.apiService.update("",`backofficeuser/${t}/reciclar`);return d?.responseEnum==C.T.SUCCESS?(n.notificationService.success("Utilizador Removido com sucesso!"),0==n.usersState.usersContent.length&&(n.usersState.isEmptyContent=!0),n.usersState.isLoadingContent=!1,!0):(n.notificationService.error(d?.responseMsg),n.usersState.addUser(i),n.usersState.isLoadingContent=!1,!1)})()}blockUser(t,n){var i=this;return(0,m.Z)(function*(){i.usersState.isLoadingContent=!0,i.usersState.toggleBlock(t,!n);const d=n?"desactivar":"activar",b=n?"Utilizador Bloqueado!":"Utilizador Desbloqueado!";let P=yield i.apiService.update("",`backofficeuser/${t}/${d}`);return P?.responseEnum==C.T.SUCCESS?(i.notificationService.success(b),i.usersState.isLoadingContent=!1,!0):(i.notificationService.error(P?.responseMsg),i.usersState.toggleBlock(t,n),i.usersState.isLoadingContent=!1,!1)})()}changePageNumber(t){var n=this;return(0,m.Z)(function*(){n.usersState.paginationStateContent.pageNumber=t,n.usersState.paginationStateContent.first=(t-1)*n.usersState.paginationStateContent.pageSize,n.getUsersData()})()}resetSearchOnDestry(){(""!=this.usersState.termSearchContent||""!=this.usersState.profileSearchContent)&&(this.usersState.termSearchContent="",this.usersState.profileSearchContent="",this.usersState.isEmptyContent=!0)}getObservableUsers(){return this.usersState.usersData$}getObservableIsLoading(){return this.usersState.isLoading$}getObservableIsEmpty(){return this.usersState.isEmptyList$}getPaginationState(){return this.usersState.paginationStateContent}}return(s=o).\u0275fac=function(t){return new(t||s)(e.LFG(I.V),e.LFG(l),e.LFG(u.g))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),o})();var h=p(1818),v=p(7960),A=p(8149),w=p(536),U=p(5799);let L=(()=>{var s;class o{transform(t){const n=t.trim().split(" ");return n.length<2?"Por favor, insira o seu primeiro e \xfaltimo nome.":n[0][0].match(/[A-Z\xc0-\xd6\xd8-\xde]/)?n[1][0].match(/[A-Z\xc0-\xd6\xd8-\xde]/)?"":"O segundo nome deve come\xe7ar com letra mai\xfascula.":"O primeiro nome deve come\xe7ar com letra mai\xfascula."}}return(s=o).\u0275fac=function(t){return new(t||s)},s.\u0275pipe=e.Yjl({name:"nomeValido",type:s,pure:!0}),o})();function $(s,o){if(1&s&&(e.TgZ(0,"span",17),e._uU(1),e.ALo(2,"nomeValido"),e.qZA()),2&s){const r=e.oxw();let t;e.xp6(1),e.Oqu(e.lcZ(2,1,null==(t=r.userGroup.get("name"))?null:t.value))}}function G(s,o){1&s&&(e.TgZ(0,"span",17),e._uU(1," Por favor, insira um e-mail v\xe1lido. "),e.qZA())}function M(s,o){if(1&s&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&s){const r=o.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function R(s,o){1&s&&(e.TgZ(0,"span",17),e._uU(1," Por favor, insira um n\xfamero de telefone v\xe1lido. "),e.qZA())}function D(s,o){1&s&&(e.TgZ(0,"span",19),e._uU(1," Palavra-Passe deve ter no m\xednimo 8 caracteres, e pelo menos 1 n\xfamero e 1 s\xedmbolo. "),e.qZA())}function Q(s,o){1&s&&e._UZ(0,"i",20)}let Y=(()=>{var s;class o{constructor(t,n,i){this.fb=t,this.userFacade=n,this.notificationService=i,this.close=new e.vpe,this.isInvalid=!1,this.profilesList=S,this.userGroup=t.group({name:["",[a.kI.required,s=>{const o=s.value.trim();return o?/^[A-Z\xc0-\xda][a-z\xe0-\xfa]+\s[A-Z\xc0-\xda][a-z\xe0-\xfa]+$/.test(o)?null:{invalidNameFormat:!0}:null}]],email:["",[a.kI.required,a.kI.pattern("^[\\w.-]+@([\\w-]+\\.)+[\\w-]{2,}$")]],profile:[this.profilesList[0],a.kI.required],phone:["",[a.kI.required,a.kI.pattern("^9[0-9]{8}$")]],password:["",[a.kI.required,a.kI.pattern("^(?=.*[0-9])(?=.*[^a-zA-Z0-9]).{8,}$")]]}),this.isLoading$=n.getObservableIsLoading()}onClose(){this.close.emit()}onSubmit(){var t=this;return(0,m.Z)(function*(){if(t.userGroup.invalid)return void t.notificationService.warning("Por favor, preencha todos os campos correctamente e tente novamente!");const n=t.userGroup.value.name.trim().split(" ");let i={email:t.userGroup.value.email,firstName:n[0],lastName:n[n.length-1],profile:t.userGroup.value.profile,phone:"244"+t.userGroup.value.phone,username:t.userGroup.value.email,password:t.userGroup.value.password,isEnabled:!0};(yield t.userFacade.addUser(i))&&t.onClose()})()}validatePhone(t){this.isInvalid=!!this.userGroup.get("phone")?.invalid}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(a.qu),e.Y36(c),e.Y36(u.g))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-user"]],outputs:{close:"close"},decls:38,vars:12,consts:[[1,"grid","grid-cols-2","p-6","gap-8","text-sm","modal-content",3,"formGroup"],[1,"flex","flex-col"],[1,"mb-1"],["type","text","formControlName","name","placeholder","Primeiro e \xdaltimo Nome",2,"padding","0.75rem","width","100%"],["class","text-red-600 text-xs pt-1",4,"ngIf"],["type","email","formControlName","email","placeholder","E-mail",2,"padding","0.75rem","width","100%"],["formControlName","profile",2,"padding","0.75rem"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"borda","inline-block","bg-gray-100","p-3","rounded-l-md"],["type","number","formControlName","phone",1,"rounded-none","w-full","rounded-r-md",2,"padding","0.75rem",3,"change"],["formControlName","password"],["class","text-red-600 text-xs pt-1 max-w-sm",4,"ngIf"],[1,"modal-footer"],[1,"btn","bg-gray-100","uppercase",2,"color","black",3,"click"],["type","submit",1,"btn","bg-accent","uppercase","flex","items-center","space-x-2",3,"disabled","click"],["class","icon-loading animate-spin text-white",4,"ngIf"],[1,"text-red-600","text-xs","pt-1"],[3,"value"],[1,"text-red-600","text-xs","pt-1","max-w-sm"],[1,"icon-loading","animate-spin","text-white"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"label",2),e._uU(3,"Primeiro e \xdaltimo Nome"),e.qZA(),e._UZ(4,"input",3),e.YNc(5,$,3,3,"span",4),e.qZA(),e.TgZ(6,"section",1)(7,"label",2),e._uU(8,"E-mail"),e.qZA(),e._UZ(9,"input",5),e.YNc(10,G,2,0,"span",4),e.qZA(),e.TgZ(11,"section",1)(12,"label",2),e._uU(13,"Tipo de Utilizador"),e.qZA(),e.TgZ(14,"select",6),e.YNc(15,M,2,2,"option",7),e.qZA()(),e.TgZ(16,"section",1)(17,"label",2),e._uU(18,"Contacto Telef\xf3nico"),e.qZA(),e.TgZ(19,"div",8)(20,"span",9),e._uU(21,"+244"),e.qZA(),e.TgZ(22,"input",10),e.NdJ("change",function(d){return n.validatePhone(d)}),e.qZA()(),e.YNc(23,R,2,0,"span",4),e.qZA(),e.TgZ(24,"section",1)(25,"label",2),e._uU(26,"Palavra-Passe"),e.qZA(),e._UZ(27,"app-input-password",11),e.YNc(28,D,2,0,"span",12),e.qZA()(),e.TgZ(29,"div",13)(30,"button",14),e.NdJ("click",function(){return n.onClose()}),e._uU(31,"Cancelar"),e.qZA(),e.TgZ(32,"button",15),e.NdJ("click",function(){return n.onSubmit()}),e.ALo(33,"async"),e.YNc(34,Q,1,0,"i",16),e.ALo(35,"async"),e.TgZ(36,"span"),e._uU(37," Guardar"),e.qZA()()()),2&t){let i,d,b;e.Q6J("formGroup",n.userGroup),e.xp6(5),e.Q6J("ngIf",(null==(i=n.userGroup.get("name"))?null:i.invalid)&&(null==(i=n.userGroup.get("name"))?null:i.touched)),e.xp6(5),e.Q6J("ngIf",(null==(d=n.userGroup.get("email"))?null:d.invalid)&&(null==(d=n.userGroup.get("email"))?null:d.touched)),e.xp6(5),e.Q6J("ngForOf",n.profilesList),e.xp6(8),e.Q6J("ngIf",n.isInvalid),e.xp6(5),e.Q6J("ngIf",(null==(b=n.userGroup.get("password"))?null:b.invalid)&&(null==(b=n.userGroup.get("password"))?null:b.dirty)),e.xp6(4),e.Q6J("disabled",e.lcZ(33,8,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(35,10,n.isLoading$))}},dependencies:[g.sg,g.O5,U.P,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,g.Ov,L]}),o})();function z(s,o){if(1&s&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"nomeValido"),e.qZA()),2&s){const r=e.oxw();let t;e.xp6(1),e.Oqu(e.lcZ(2,1,null==(t=r.userGroup.get("name"))?null:t.value))}}function B(s,o){if(1&s&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&s){const r=o.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function V(s,o){1&s&&(e.TgZ(0,"span",14),e._uU(1," Por favor, insira um n\xfamero de telefone v\xe1lido. "),e.qZA())}function H(s,o){1&s&&e._UZ(0,"i",16)}let X=(()=>{var s;class o{constructor(t,n,i){this.fb=t,this.userFacade=n,this.notificationService=i,this.close=new e.vpe,this.profilesList=S,this.isInvalid=!1,this.isLoading$=n.getObservableIsLoading()}ngOnInit(){this.userGroup=this.fb.group({name:[this.currentUser?.firstName+" "+this.currentUser?.lastName,a.kI.required],profile:[this.currentUser?.profile,a.kI.required],phone:[this.currentUser?.phone.slice(3),[a.kI.required,a.kI.pattern("^9[0-9]{8}$")]]})}onClose(){this.close.emit()}onSubmit(){var t=this;return(0,m.Z)(function*(){if(t.userGroup.invalid)return void t.notificationService.warning("Por favor, preencha todos os campos e tente novamente!");const n=t.userGroup.value.name.trim().split(" ");t.currentUser.firstName=n[0],t.currentUser.lastName=n[n.length-1],t.currentUser.profile=t.userGroup.value.profile,t.currentUser.phone="244"+t.userGroup.value.phone,(yield t.userFacade.editUser(t.currentUser))&&t.onClose()})()}validatePhone(t){this.isInvalid=!!this.userGroup.get("phone")?.invalid}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(a.qu),e.Y36(c),e.Y36(u.g))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-edit-user"]],inputs:{currentUser:"currentUser"},outputs:{close:"close"},decls:28,vars:10,consts:[[1,"grid","grid-cols-2","p-6","gap-8","text-sm","modal-content",3,"formGroup"],[1,"flex","flex-col"],[1,"mb-1"],["type","text","formControlName","name","placeholder","Nome Completo",2,"padding","0.75rem","width","100%"],["class","text-red-600 text-xs pt-1",4,"ngIf"],["formControlName","profile",2,"padding","0.75rem"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"borda","inline-block","bg-gray-100","p-3","rounded-l-md"],["type","number","formControlName","phone",1,"rounded-none","w-64","rounded-r-md",2,"padding","0.75rem",3,"change"],[1,"modal-footer"],[1,"btn","bg-gray-100","uppercase",2,"color","black",3,"click"],["type","submit",1,"btn","bg-accent","uppercase","flex","items-center","space-x-2",3,"disabled","click"],["class","icon-loading animate-spin text-white",4,"ngIf"],[1,"text-red-600","text-xs","pt-1"],[3,"value"],[1,"icon-loading","animate-spin","text-white"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"label",2),e._uU(3,"Nome"),e.qZA(),e._UZ(4,"input",3),e.YNc(5,z,3,3,"span",4),e.qZA(),e.TgZ(6,"section",1)(7,"label",2),e._uU(8,"Tipo de Utilizador"),e.qZA(),e.TgZ(9,"select",5),e.YNc(10,B,2,2,"option",6),e.qZA()(),e.TgZ(11,"section",1)(12,"label",2),e._uU(13,"Contacto Telef\xf3nico"),e.qZA(),e.TgZ(14,"div",7)(15,"span",8),e._uU(16,"+244"),e.qZA(),e.TgZ(17,"input",9),e.NdJ("change",function(d){return n.validatePhone(d)}),e.qZA()(),e.YNc(18,V,2,0,"span",4),e.qZA()(),e.TgZ(19,"div",10)(20,"button",11),e.NdJ("click",function(){return n.onClose()}),e._uU(21,"Cancelar"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return n.onSubmit()}),e.ALo(23,"async"),e.YNc(24,H,1,0,"i",13),e.ALo(25,"async"),e.TgZ(26,"span"),e._uU(27," Guardar"),e.qZA()()()),2&t){let i;e.Q6J("formGroup",n.userGroup),e.xp6(5),e.Q6J("ngIf",(null==(i=n.userGroup.get("name"))?null:i.invalid)&&(null==(i=n.userGroup.get("name"))?null:i.touched)),e.xp6(5),e.Q6J("ngForOf",n.profilesList),e.xp6(8),e.Q6J("ngIf",n.isInvalid),e.xp6(4),e.Q6J("disabled",e.lcZ(23,6,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(25,8,n.isLoading$))}},dependencies:[g.sg,g.O5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.sg,a.u,g.Ov,L]}),o})();var j=p(3044);function K(s,o){1&s&&e._UZ(0,"i",7)}let W=(()=>{var s;class o{constructor(t,n){this.userFacade=t,this.modalService=n,this.isLoading$=t.getObservableIsLoading()}ngOnInit(){}removerUser(){var t=this;return(0,m.Z)(function*(){(yield t.userFacade.removeUser(t.currentUser.id))&&t.closeModal()})()}closeModal(){this.modalService.closeModal()}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(c),e.Y36(j.Z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-delete-user"]],inputs:{currentUser:"currentUser"},decls:18,vars:10,consts:[[1,"modal-content",3,"ngSubmit"],[1,"leading-7"],[1,"font-medium"],[1,"modal-footer"],[1,"btn","bg-gray-100","uppercase",2,"color","black",3,"click"],[1,"bg-vermelho","btn","uppercase","flex","items-center","space-x-2",3,"disabled","click"],["class","icon-loading animate-spin text-white",4,"ngIf"],[1,"icon-loading","animate-spin","text-white"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.removerUser()}),e.TgZ(1,"div")(2,"p",1),e._uU(3,"Tem certeza que pretende remover o utilizador"),e._UZ(4,"br"),e.TgZ(5,"span",2),e._uU(6),e.qZA(),e._uU(7,"?"),e.qZA()()(),e.TgZ(8,"div",3)(9,"button",4),e.NdJ("click",function(){return n.closeModal()}),e._uU(10,"Cancelar"),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return n.removerUser()}),e.ALo(12,"async"),e.YNc(13,K,1,0,"i",6),e.ALo(14,"async"),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"async"),e.qZA()()()),2&t&&(e.xp6(6),e.Oqu(n.currentUser.firstName+" "+n.currentUser.lastName),e.xp6(5),e.Q6J("disabled",e.lcZ(12,4,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,6,n.isLoading$)),e.xp6(3),e.hij(" ",e.lcZ(17,8,n.isLoading$)?"Removendo...":"Remover"," "))},dependencies:[g.O5,a._Y,a.JL,g.Ov]}),o})();function ee(s,o){1&s&&e._UZ(0,"i",7)}let te=(()=>{var s;class o{constructor(t){this.userFacade=t,this.close=new e.vpe,this.isEnable=!1,this.isLoading$=t.getObservableIsLoading()}ngOnInit(){this.isEnable=this.currentUser.isEnabled}desativarUser(){var t=this;return(0,m.Z)(function*(){(yield t.userFacade.blockUser(t.currentUser.id,t.currentUser.isEnabled))&&t.onClose()})()}onClose(){this.close.emit()}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-desactive-user"]],inputs:{currentUser:"currentUser"},outputs:{close:"close"},decls:19,vars:15,consts:[[1,"modal-content",3,"ngSubmit"],[1,"leading-7"],[1,"font-medium"],[1,"modal-footer"],[1,"btn","bg-gray-100","uppercase",2,"color","black",3,"click"],[3,"disabled","click"],["class","icon-loading animate-spin text-white",4,"ngIf"],[1,"icon-loading","animate-spin","text-white"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.desativarUser()}),e.TgZ(1,"div")(2,"p",1),e._uU(3),e._UZ(4,"br"),e.TgZ(5,"span",2),e._uU(6),e.qZA(),e._uU(7,"?"),e.qZA()()(),e.TgZ(8,"div",3)(9,"button",4),e.NdJ("click",function(){return n.onClose()}),e._uU(10,"Cancelar"),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return n.desativarUser()}),e.ALo(12,"async"),e.YNc(13,ee,1,0,"i",6),e.ALo(14,"async"),e.TgZ(15,"span"),e._uU(16),e.ALo(17,"async"),e.ALo(18,"async"),e.qZA()()()),2&t&&(e.xp6(3),e.hij("Tem certeza que pretende ",n.isEnable?"desactivar":"activar"," o utilizador"),e.xp6(3),e.Oqu(n.currentUser.firstName+" "+n.currentUser.lastName),e.xp6(5),e.Tol("btn uppercase flex items-center space-x-2 "+(n.isEnable?"bg-vermelho":"bg-verde")),e.Q6J("disabled",e.lcZ(12,7,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,9,n.isLoading$)),e.xp6(3),e.hij(" ",n.isEnable?e.lcZ(17,11,n.isLoading$)?"Desactivando...":"Desactivar":e.lcZ(18,13,n.isLoading$)?"Activando...":"Activar"," "))},dependencies:[g.O5,a._Y,a.JL,g.Ov]}),o})();function ne(s,o){1&s&&(e.TgZ(0,"span",10),e._uU(1," Palavra-Passe deve ter no m\xednimo 8 caracteres, e pelo menos 1 n\xfamero e 1 s\xedmbolo. "),e.qZA())}function se(s,o){1&s&&(e.TgZ(0,"span",10),e._uU(1," Palavra-Passe deve ter no m\xednimo 8 caracteres, e pelo menos 1 n\xfamero e 1 s\xedmbolo. "),e.qZA())}function re(s,o){1&s&&e._UZ(0,"i",11)}let ie=(()=>{var s;class o{constructor(t,n,i){this.fb=t,this.userFacade=n,this.notificationService=i,this.close=new e.vpe,this.profilesList=S,this.userGroup=t.group({password:["",[a.kI.required,a.kI.pattern("^(?=.*[0-9])(?=.*[^a-zA-Z0-9]).{8,}$")]],confirmPassword:["",[a.kI.required,a.kI.pattern("^(?=.*[0-9])(?=.*[^a-zA-Z0-9]).{8,}$")]]}),this.isLoading$=n.getObservableIsLoading()}ngOnInit(){}onClose(){this.close.emit()}onSubmit(){var t=this;return(0,m.Z)(function*(){if(t.userGroup.value.password!==t.userGroup.value.confirmPassword)return void t.notificationService.warning("Palavras-Passe n\xe3o coincidem!");if(t.userGroup.invalid)return void t.notificationService.warning("Por favor, preencha todos os campos e tente novamente!");let n={email:t.currentUser.email,userId:t.currentUser.id,novaPalavraPasse:t.userGroup.value.password};(yield t.userFacade.resetPassword(n))&&t.onClose()})()}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(a.qu),e.Y36(c),e.Y36(u.g))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-reset-password"]],inputs:{currentUser:"currentUser"},outputs:{close:"close"},decls:20,vars:9,consts:[[1,"grid","grid-cols-1","p-6","gap-8","text-sm","modal-content",3,"formGroup"],[1,"flex","flex-col","space-y-1"],[1,""],["formControlName","password"],["class","text-red-600 text-xs pt-1 max-w-sm",4,"ngIf"],["formControlName","confirmPassword"],[1,"modal-footer"],[1,"btn","bg-gray-100","uppercase",2,"color","black",3,"click"],["type","submit",1,"btn","bg-accent","uppercase","flex","items-center","space-x-2",3,"disabled","click"],["class","icon-loading animate-spin text-white",4,"ngIf"],[1,"text-red-600","text-xs","pt-1","max-w-sm"],[1,"icon-loading","animate-spin","text-white"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"section",1)(2,"label",2),e._uU(3,"Nova Palavra-Passe"),e.qZA(),e._UZ(4,"app-input-password",3),e.YNc(5,ne,2,0,"span",4),e.qZA(),e.TgZ(6,"section",1)(7,"label"),e._uU(8,"Confirmar Palavra-Passe"),e.qZA(),e._UZ(9,"app-input-password",5),e.YNc(10,se,2,0,"span",4),e.qZA()(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return n.onClose()}),e._uU(13,"Cancelar"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return n.onSubmit()}),e.ALo(15,"async"),e.YNc(16,re,1,0,"i",9),e.ALo(17,"async"),e.TgZ(18,"span"),e._uU(19," Actualizar"),e.qZA()()()),2&t){let i,d;e.Q6J("formGroup",n.userGroup),e.xp6(5),e.Q6J("ngIf",(null==(i=n.userGroup.get("password"))?null:i.invalid)&&(null==(i=n.userGroup.get("password"))?null:i.dirty)),e.xp6(5),e.Q6J("ngIf",(null==(d=n.userGroup.get("confirmPassword"))?null:d.invalid)&&(null==(d=n.userGroup.get("confirmPassword"))?null:d.dirty)),e.xp6(4),e.Q6J("disabled",e.lcZ(15,5,n.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(17,7,n.isLoading$))}},dependencies:[g.O5,U.P,a._Y,a.JJ,a.JL,a.sg,a.u,g.Ov]}),o})();var q=p(6472),oe=p(5300);function ae(s,o){if(1&s&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&s){const r=o.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function le(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"phoneNumberPipe"),e.qZA(),e.TgZ(10,"td",30)(11,"button",31),e.NdJ("click",function(){const i=e.CHM(r).$implicit,d=e.oxw(4);return e.KtG(d.editUser(i))}),e._UZ(12,"i",32),e.qZA(),e.TgZ(13,"button",33),e.NdJ("click",function(){const i=e.CHM(r).$implicit,d=e.oxw(4);return e.KtG(d.toggleBlock(i))}),e._UZ(14,"i"),e.qZA(),e.TgZ(15,"button",33),e.NdJ("click",function(){const i=e.CHM(r).$implicit,d=e.oxw(4);return e.KtG(d.resetPassword(i))}),e._UZ(16,"i",34),e.qZA(),e.TgZ(17,"button",35),e.NdJ("click",function(){const i=e.CHM(r).$implicit,d=e.oxw(4);return e.KtG(d.deleteUser(i))}),e._UZ(18,"i",36),e.qZA()()()}if(2&s){const r=o.$implicit;e.xp6(2),e.AsE("",r.firstName," ",r.lastName,""),e.xp6(2),e.Oqu(r.email),e.xp6(2),e.hij(" ",r.profile," "),e.xp6(2),e.Oqu(e.lcZ(9,7,r.phone)),e.xp6(6),e.Tol(r.isEnabled?"icon-ic-security-unlocked":"icon-ic-security-locked")}}const ce=function(s,o,r){return{itemsPerPage:s,currentPage:o,totalItems:r}};function ue(s,o){if(1&s){const r=e.EpF();e.ynx(0),e.TgZ(1,"table")(2,"thead")(3,"tr")(4,"th"),e._uU(5," Nome "),e.qZA(),e.TgZ(6,"th"),e._uU(7," E-mail "),e.qZA(),e.TgZ(8,"th"),e._uU(9," Tipo de Utilizador "),e.qZA(),e.TgZ(10,"th"),e._uU(11," Contacto Telef\xf3nico "),e.qZA(),e.TgZ(12,"th"),e._uU(13," Ac\xe7\xf5es "),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,le,19,9,"tr",27),e.ALo(16,"paginate"),e.qZA()(),e.TgZ(17,"div",28)(18,"app-pagination",29),e.NdJ("pageChange",function(n){e.CHM(r);const i=e.oxw(3);return e.KtG(i.changePageNumber(n))}),e.qZA()(),e.BQk()}if(2&s){const r=o.ngIf,t=e.oxw(3);e.xp6(15),e.Q6J("ngForOf",e.xi3(16,1,r,e.kEZ(4,ce,t.paginationState.pageSize,t.paginationState.pageNumber,t.paginationState.totalRecords)))}}function pe(s,o){if(1&s&&(e.ynx(0),e.YNc(1,ue,19,8,"ng-container",26),e.ALo(2,"async"),e.BQk()),2&s){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.users$))}}function de(s,o){if(1&s&&(e.ynx(0),e.YNc(1,pe,3,3,"ng-container",25),e.ALo(2,"async"),e.BQk()),2&s){const r=e.oxw();e.xp6(1),e.Q6J("skeleton",e.lcZ(2,5,r.isLoading$))("skeletonRepeat",6)("skeletonWidth","97%")("skeletonHeight","50px")("skeletonClassName","m-4")}}function me(s,o){1&s&&(e.TgZ(0,"div",37),e._UZ(1,"app-content-message"),e.qZA())}function ge(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"app-modal-main",38),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.TgZ(1,"app-add-user",39),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.qZA()()}}function he(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"app-modal-main",40),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.TgZ(1,"app-edit-user",41),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.qZA()()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("currentUser",r.currentUser)}}function _e(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"app-modal-main",42),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.TgZ(1,"app-delete-user",41),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.qZA()()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("currentUser",r.currentUser)}}function fe(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"app-modal-main",43),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.TgZ(1,"app-desactive-user",41),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.qZA()()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("currentUser",r.currentUser)}}function ve(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"app-modal-main",44),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.TgZ(1,"app-reset-password",41),e.NdJ("close",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.closeModal())}),e.qZA()()}if(2&s){const r=e.oxw();e.xp6(1),e.Q6J("currentUser",r.currentUser)}}let Ce=(()=>{var s;class o{constructor(t){this.userFacade=t,this.showAddUserModal=!1,this.showEditUserModal=!1,this.showDeleteModal=!1,this.showBlockUserModal=!1,this.showResetPasswordModal=!1,this.profilesList=S,this.profileUserControl=new a.NI(""),this.searchControl=new a.NI(""),this.users$=t.getObservableUsers(),this.isLoading$=t.getObservableIsLoading(),this.isEmpty$=t.getObservableIsEmpty(),this.paginationState=t.getPaginationState()}ngOnInit(){var t=this;return(0,m.Z)(function*(){yield t.userFacade.getUsersData(),t.userFacade.listenToSearchChanges(t.searchControl.valueChanges),t.userFacade.listenToProfileSearchChanges(t.profileUserControl.valueChanges)})()}closeModal(){this.showAddUserModal=!1,this.showEditUserModal=!1,this.showDeleteModal=!1,this.showBlockUserModal=!1,this.showResetPasswordModal=!1}setCurrentUser(t){this.currentUser=t}toggleBlock(t){var n=this;return(0,m.Z)(function*(){n.showBlockUserModal=!0,n.setCurrentUser(t)})()}resetPassword(t){var n=this;return(0,m.Z)(function*(){n.showResetPasswordModal=!0,n.setCurrentUser(t)})()}deleteUser(t){var n=this;return(0,m.Z)(function*(){n.showDeleteModal=!0,n.setCurrentUser(t)})()}editUser(t){var n=this;return(0,m.Z)(function*(){n.showEditUserModal=!0,n.setCurrentUser(t)})()}changePageNumber(t){var n=this;return(0,m.Z)(function*(){n.userFacade.changePageNumber(t)})()}ngOnDestroy(){this.userFacade.resetSearchOnDestry()}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-users"]],decls:35,vars:12,consts:[[1,"intern-header"],[1,"intern-header-title"],[1,"intern-header-description"],[1,"flex","space-x-4","mb-6"],[1,"btn","bg-accent","flex","items-center","space-x-2",3,"click"],[1,"icon-ic-users-add",2,"color","white"],["routerLink","/users/recycle",1,"btn","bg-accent","flex","items-center","space-x-2"],[1,"icon-ic-actions-trash"],[1,"card-parent"],[1,"flex","p-5","border-b","border-gray-200","space-x-4","items-end"],[1,"relative","flex","items-center","justify-end"],["type","text","placeholder","Pesquisar","title","title","autocomplete","off",1,"",3,"formControl"],[1,"icon-ic-actions-search","absolute","mr-5"],[1,"flex","flex-col"],["type","text",1,"",3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlockTable",""],["title","Adicionar Utiilizador",3,"close",4,"ngIf"],["title","Editar Utiilizador",3,"close",4,"ngIf"],["title","Remover Utiilizador",3,"close",4,"ngIf"],["title","Bloquear Utiilizador",3,"close",4,"ngIf"],["title","Actualizar Palavra-Passe",3,"close",4,"ngIf"],[3,"value"],[4,"skeleton","skeletonRepeat","skeletonWidth","skeletonHeight","skeletonClassName"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","px-5","py-3","justify-end"],[3,"pageChange"],[1,"flex","space-x-4"],[1,"border","border-gray-300","bg-gray-50","px-2","pt-1","rounded-md",3,"click"],[1,"icon-ic-pencil","text-accent"],[1,"icon-btn",3,"click"],[1,"icon-fluent_key","text-amarelo",2,"font-size","1rem"],[1,"border","border-gray-300","px-2","pt-1","rounded-md","bg-gray-50",3,"click"],[1,"icon-ic-actions-trash","text-rose-600"],[1,"flex","justify-center","items-center","pt-8","border-solid","border-t-[1.5px]","border-gray-200"],["title","Adicionar Utiilizador",3,"close"],[3,"close"],["title","Editar Utiilizador",3,"close"],[3,"currentUser","close"],["title","Remover Utiilizador",3,"close"],["title","Bloquear Utiilizador",3,"close"],["title","Actualizar Palavra-Passe",3,"close"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Gerir Utilizador"),e.qZA(),e.TgZ(3,"span",2),e._uU(4,"Adicione ou efetue altera\xe7\xf5es em um utilizador."),e.qZA()(),e.TgZ(5,"div",3)(6,"button",4),e.NdJ("click",function(){return n.showAddUserModal=!0}),e._UZ(7,"i",5),e.TgZ(8,"span"),e._uU(9,"Adicionar Utilizador"),e.qZA()(),e.TgZ(10,"a",6),e._UZ(11,"i",7),e.TgZ(12,"span"),e._uU(13,"Reciclagem"),e.qZA()()(),e.TgZ(14,"div",8)(15,"div",9)(16,"div",10),e._UZ(17,"input",11)(18,"i",12),e.qZA(),e.TgZ(19,"div",13)(20,"label"),e._uU(21,"Selecionar Tipo de Utilizador"),e.qZA(),e.TgZ(22,"select",14)(23,"option",15),e._uU(24,"Todos"),e.qZA(),e.YNc(25,ae,2,2,"option",16),e.qZA()()(),e.YNc(26,de,3,7,"ng-container",17),e.ALo(27,"async"),e.YNc(28,me,2,0,"ng-template",null,18,e.W1O),e.qZA(),e.YNc(30,ge,2,0,"app-modal-main",19),e.YNc(31,he,2,1,"app-modal-main",20),e.YNc(32,_e,2,1,"app-modal-main",21),e.YNc(33,fe,2,1,"app-modal-main",22),e.YNc(34,ve,2,1,"app-modal-main",23)),2&t){const i=e.MAs(29);e.xp6(17),e.Q6J("formControl",n.searchControl),e.xp6(5),e.Q6J("formControl",n.profileUserControl),e.xp6(3),e.Q6J("ngForOf",n.profilesList),e.xp6(1),e.Q6J("ngIf",!e.lcZ(27,10,n.isEmpty$))("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",n.showAddUserModal),e.xp6(1),e.Q6J("ngIf",n.showEditUserModal),e.xp6(1),e.Q6J("ngIf",n.showDeleteModal),e.xp6(1),e.Q6J("ngIf",n.showBlockUserModal),e.xp6(1),e.Q6J("ngIf",n.showResetPasswordModal)}},dependencies:[g.sg,g.O5,Z.rH,h.Q,v.F,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.oH,A.Q,w.e,Y,X,W,te,ie,g.Ov,q._s,oe.X]}),o})(),F=(()=>{var s;class o{constructor(){this.usersData=new _.X(null),this.isLoading=new _.X(!0),this.isEmptyList=new _.X(!1),this.termSearch=new _.X(""),this.uriForSearch=new _.X(""),this.paginationState=new _.X(new f.n),this.usersData$=this.usersData.asObservable(),this.isLoading$=this.isLoading.asObservable(),this.isEmptyList$=this.isEmptyList.asObservable(),this.uriForSearch$=this.uriForSearch.asObservable(),this.paginationState$=this.paginationState.asObservable(),this.termSearch$=this.termSearch.asObservable()}get usersContent(){return this.usersData.getValue()}set usersContent(t){this.usersData.next(t)}get isLoadingContent(){return this.isLoading.getValue()}set isLoadingContent(t){this.isLoading.next(t)}get isEmptyContent(){return this.isEmptyList.getValue()}set isEmptyContent(t){this.isEmptyList.next(t)}get termSearchContent(){return this.termSearch.getValue()}set termSearchContent(t){this.termSearch.next(t)}get uriForSearchContent(){return this.uriForSearch.getValue()}set uriForSearchContent(t){this.uriForSearch.next(t)}get paginationStateContent(){return this.paginationState.getValue()}set paginationStateContent(t){this.paginationState.next(t)}getById(t){return this.usersContent.find(n=>n.id===t)}addUser(t){return this.usersContent=[...this.usersContent,t],t}removeUser(t){this.usersContent=this.usersContent.filter(n=>n.id!==t)}}return(s=o).\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),o})(),J=(()=>{var s;class o{constructor(t,n,i){this.apiService=t,this.usersState=n,this.notificationService=i}updateUriForSearch(){this.usersState.isLoadingContent=!0,this.usersState.isEmptyContent=!1;let t=new URLSearchParams({first:this.usersState.paginationStateContent.first.toString(),max:this.usersState.paginationStateContent.pageSize.toString()});""!==this.usersState.termSearchContent&&t.set("email",this.usersState.termSearchContent.trim()),this.usersState.uriForSearchContent="backofficeuser/buscarpor/"+encodeURIComponent("?"+t.toString()+"&q=recycled:true")}listenToSearchChanges(t){t.pipe((0,y.x)(),(0,E.b)(400),(0,T.w)(n=>(this.usersState.paginationStateContent.pageNumber=0,this.usersState.paginationStateContent.first=0,this.usersState.termSearchContent=n,this.getUsersData()))).subscribe()}validateResult(t){if(t?.responseEnum==C.T.SUCCESS){let n=t?.data.users;this.usersState.usersContent=n,this.usersState.paginationStateContent.totalRecords=t?.data.total,0==n?.length&&(this.usersState.isEmptyContent=!0)}else this.notificationService.error(t?.responseMsg),this.usersState.isEmptyContent=!0;this.usersState.isLoadingContent=!1}getUsersData(){var t=this;return(0,m.Z)(function*(){t.updateUriForSearch();let n=yield t.apiService.get(t.usersState.uriForSearchContent);t.validateResult(n)})()}restaurarUser(t){var n=this;return(0,m.Z)(function*(){n.usersState.isLoadingContent=!0;const i=n.usersState.getById(t);n.usersState.removeUser(t);let d=yield n.apiService.update("",`backofficeuser/${t}/restaurar`);return d?.responseEnum==C.T.SUCCESS?(n.notificationService.success("Utilizador Restaurado com suecesso!"),0==n.usersState.usersContent.length&&(n.usersState.isEmptyContent=!0),n.usersState.isLoadingContent=!1,!0):(n.notificationService.error(d?.responseMsg),n.usersState.addUser(i),n.usersState.isLoadingContent=!1,!1)})()}changePageNumber(t){var n=this;return(0,m.Z)(function*(){n.usersState.paginationStateContent.pageNumber=t,n.usersState.paginationStateContent.first=(t-1)*n.usersState.paginationStateContent.pageSize,n.getUsersData()})()}getObservableUsers(){return this.usersState.usersData$}getObservableIsLoading(){return this.usersState.isLoading$}getObservableIsEmpty(){return this.usersState.isEmptyList$}getPaginationState(){return this.usersState.paginationStateContent}}return(s=o).\u0275fac=function(t){return new(t||s)(e.LFG(I.V),e.LFG(F),e.LFG(u.g))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),o})();function Ue(s,o){if(1&s){const r=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td",16)(10,"button",17),e.NdJ("click",function(){const i=e.CHM(r).$implicit,d=e.oxw(4);return e.KtG(d.onSubmit(i))}),e.TgZ(11,"span"),e._uU(12,"Restaurar"),e.qZA()()()()}if(2&s){const r=o.$implicit;e.xp6(2),e.AsE("",r.firstName," ",r.lastName,""),e.xp6(2),e.Oqu(r.email),e.xp6(2),e.hij(" ",r.profile," "),e.xp6(2),e.Oqu(r.phone)}}const Se=function(s,o,r){return{itemsPerPage:s,currentPage:o,totalItems:r}};function Ze(s,o){if(1&s){const r=e.EpF();e.ynx(0),e.TgZ(1,"table")(2,"thead")(3,"tr")(4,"th"),e._uU(5," Nome "),e.qZA(),e.TgZ(6,"th"),e._uU(7," E-mail "),e.qZA(),e.TgZ(8,"th"),e._uU(9," Tipo de Utilizador "),e.qZA(),e.TgZ(10,"th"),e._uU(11," Contacto Telef\xf3nico "),e.qZA(),e.TgZ(12,"th"),e._uU(13," Ac\xe7\xf5es "),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,Ue,13,5,"tr",13),e.ALo(16,"paginate"),e.qZA()(),e.TgZ(17,"div",14)(18,"app-pagination",15),e.NdJ("pageChange",function(n){e.CHM(r);const i=e.oxw(3);return e.KtG(i.changePageNumber(n))}),e.qZA()(),e.BQk()}if(2&s){const r=o.ngIf,t=e.oxw(3);e.xp6(15),e.Q6J("ngForOf",e.xi3(16,1,r,e.kEZ(4,Se,t.paginationState.pageSize,t.paginationState.pageNumber,t.paginationState.totalRecords)))}}function be(s,o){if(1&s&&(e.ynx(0),e.YNc(1,Ze,19,8,"ng-container",12),e.ALo(2,"async"),e.BQk()),2&s){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.users$))}}function xe(s,o){if(1&s&&(e.ynx(0),e.YNc(1,be,3,3,"ng-container",11),e.ALo(2,"async"),e.BQk()),2&s){const r=e.oxw();e.xp6(1),e.Q6J("skeleton",e.lcZ(2,5,r.isLoading$))("skeletonRepeat",6)("skeletonWidth","97%")("skeletonHeight","50px")("skeletonClassName","m-4")}}function ye(s,o){1&s&&(e.TgZ(0,"div",18),e._UZ(1,"app-content-message"),e.qZA())}const Te=[{path:"",component:Ce},{path:"recycle",component:(()=>{var s;class o{constructor(t){this.userFacade=t,this.currentPage=1,this.itemsPerPage=4,this.searchControl=new a.NI(""),this.users$=t.getObservableUsers(),this.isLoading$=t.getObservableIsLoading(),this.isEmpty$=t.getObservableIsEmpty(),this.paginationState=t.getPaginationState()}ngOnInit(){var t=this;return(0,m.Z)(function*(){yield t.userFacade.getUsersData(),t.userFacade.listenToSearchChanges(t.searchControl.valueChanges)})()}onSubmit(t){var n=this;return(0,m.Z)(function*(){yield n.userFacade.restaurarUser(t.id)})()}changePageNumber(t){var n=this;return(0,m.Z)(function*(){n.userFacade.changePageNumber(t)})()}}return(s=o).\u0275fac=function(t){return new(t||s)(e.Y36(J))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-recycle"]],decls:15,vars:5,consts:[[1,"intern-header","flex","items-center"],["routerLink","../",1,"flex","items-center","justify-start","rounded-lg","h-fit","font-bold","text-base","cursor-pointer","bg-gray-50","py-2","px-3","mr-2","border-[1px]","border-solid","border-gray-300"],[1,"icon-arrow-left"],[1,"intern-header-title"],[1,"card-parent"],[1,"flex","p-5","border-b","border-gray-200","space-x-4","items-end"],[1,"relative","flex","items-center","justify-end"],["type","text","placeholder","Pesquisar","title","title",1,"",3,"formControl"],[1,"icon-ic-actions-search","absolute","mr-5"],[4,"ngIf","ngIfElse"],["elseBlockTable",""],[4,"skeleton","skeletonRepeat","skeletonWidth","skeletonHeight","skeletonClassName"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","px-5","py-3","justify-end"],[3,"pageChange"],[1,"flex","space-x-4"],[1,"border","border-gray-300","px-2","p-1","rounded-lg","bg-gray-50","flex","items-center","space-x-2","w-fit",3,"click"],[1,"flex","justify-center","items-center","pt-8","border-solid","border-t-[1.5px]","border-gray-200"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div")(4,"h1",3),e._uU(5,"Reciclagem"),e.qZA()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e._UZ(9,"input",7)(10,"i",8),e.qZA()(),e.YNc(11,xe,3,7,"ng-container",9),e.ALo(12,"async"),e.YNc(13,ye,2,0,"ng-template",null,10,e.W1O),e.qZA()),2&t){const i=e.MAs(14);e.xp6(9),e.Q6J("formControl",n.searchControl),e.xp6(2),e.Q6J("ngIf",!e.lcZ(12,3,n.isEmpty$))("ngIfElse",i)}},dependencies:[g.sg,g.O5,Z.rH,h.Q,a.Fj,a.JJ,a.oH,A.Q,w.e,g.Ov,q._s]}),o})()}];let Ae=(()=>{var s;class o{}return(s=o).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Z.Bz.forChild(Te),Z.Bz]}),o})();var we=p(6208),Le=p(6846),Ne=p(4792),Ee=p(8518),Ie=p(1965);let ke=(()=>{var s;class o{}return(s=o).\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[c,l,J,F],imports:[g.ez,Ae,we.m,Le.z,a.UX,Ne.U,Ee.R,Ie.m]}),o})()},1426:(O,N,p)=>{p.d(N,{b:()=>_});var g=p(7394);class Z extends g.w0{constructor(l,u){super()}schedule(l,u=0){return this}}const m={setInterval(f,l,...u){const{delegate:c}=m;return c?.setInterval?c.setInterval(f,l,...u):setInterval(f,l,...u)},clearInterval(f){const{delegate:l}=m;return(l?.clearInterval||clearInterval)(f)},delegate:void 0};var a=p(9039);const S={now:()=>(S.delegate||Date).now(),delegate:void 0};class e{constructor(l,u=e.now){this.schedulerActionCtor=l,this.now=u}schedule(l,u=0,c){return new this.schedulerActionCtor(this,l).schedule(c,u)}}e.now=S.now;const y=new class C extends e{constructor(l,u=e.now){super(l,u),this.actions=[],this._active=!1}flush(l){const{actions:u}=this;if(this._active)return void u.push(l);let c;this._active=!0;do{if(c=l.execute(l.state,l.delay))break}while(l=u.shift());if(this._active=!1,c){for(;l=u.shift();)l.unsubscribe();throw c}}}(class x extends Z{constructor(l,u){super(l,u),this.scheduler=l,this.work=u,this.pending=!1}schedule(l,u=0){var c;if(this.closed)return this;this.state=l;const h=this.id,v=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(v,h,u)),this.pending=!0,this.delay=u,this.id=null!==(c=this.id)&&void 0!==c?c:this.requestAsyncId(v,this.id,u),this}requestAsyncId(l,u,c=0){return m.setInterval(l.flush.bind(l,this),c)}recycleAsyncId(l,u,c=0){if(null!=c&&this.delay===c&&!1===this.pending)return u;null!=u&&m.clearInterval(u)}execute(l,u){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(l,u);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,u){let h,c=!1;try{this.work(l)}catch(v){c=!0,h=v||new Error("Scheduled action threw falsy error")}if(c)return this.unsubscribe(),h}unsubscribe(){if(!this.closed){const{id:l,scheduler:u}=this,{actions:c}=u;this.work=this.state=this.scheduler=null,this.pending=!1,(0,a.P)(c,this),null!=l&&(this.id=this.recycleAsyncId(u,l,null)),this.delay=null,super.unsubscribe()}}});var T=p(9360),I=p(8251);function _(f,l=y){return(0,T.e)((u,c)=>{let h=null,v=null,A=null;const w=()=>{if(h){h.unsubscribe(),h=null;const U=v;v=null,c.next(U)}};function k(){const U=A+f,L=l.now();if(L<U)return h=this.schedule(void 0,U-L),void c.add(h);w()}u.subscribe((0,I.x)(c,U=>{v=U,A=l.now(),h||(h=l.schedule(k,f),c.add(h))},()=>{w(),c.complete()},void 0,()=>{v=h=null}))})}}}]);